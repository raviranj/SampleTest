<app-navbar></app-navbar>

<div class="container add-passenger">
	<button class="btn btn-primary" type="submit" data-toggle="modal" data-target="#myModal"
		(click)="addPassenger()">Add Passenger</button>
</div>

<div class="container success-checkedin">
	<div class="container name-search">
		<label><b>Search By Name :&nbsp;</b><input type="text" placeholder="Passenger Name" [(ngModel)]="passengerName"
				(input)="search()" /></label>
	</div>
	<table class="table marginRow">
		<thead class="thead-light">
			<tr>
				<th scope="col">Passenger Name</th>
				<th scope="col">Status</th>
				<th scope="col">Seat Number</th>
				<th scope="col">Passport</th>
				<th scope="col">Wheel Chair</th>
				<th scope="col">Infants</th>
				<th scope="col">FlightShop</th>
			</tr>
		</thead>
		<ng-template ngFor let-i="index" let-passengerInfo [ngForOf]="passengers">
			<tr *ngIf="passengerInfo.checkIn===true">
				<td scope="row">{{passengerInfo.name}}</td>
				<th scope="col" [ngStyle]="{ 'color': 'green' }">
					<mat-icon> flight</mat-icon>
				</th>
				<td scope="row">
					<mat-icon>airline_seat_recline_extra</mat-icon>{{passengerInfo.seatNumber}}
				</td>
				<td scope="row">{{passengerInfo.passport}}</td>
				<td scope="row">
					<mat-checkbox [(ngModel)]="passengerInfo.wheelchair">
					</mat-checkbox>
				</td>
				<td scope="row">
					<mat-checkbox [(ngModel)]="passengerInfo.withInfants">
					</mat-checkbox>
				</td>
				<td scope="row">
					<mat-checkbox [(ngModel)]="passengerInfo.inFlightShop">
					</mat-checkbox>
				</td>
				<td scope="row">
					<button type="button" title='Edit' class="btn btn-secondary btn-sm" data-toggle="modal"
						data-target="#myModal" (click)="editPassenger(passengerInfo)">
						<mat-icon>open_in_new</mat-icon>
					</button>
				</td>
			</tr>
		</ng-template>
	</table>
</div>

<div id="myModal" class="modal fade" role="dialog">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal">&times;</button>
			</div>
			<div class="modal-body">
				<form #passengerForm="ngForm">
					<div class="panel panel-primary">
						<div class="panel-body">
							<div class="form-group">
								<label for="name">Full Name*</label>
								<div class="com-sm-8">
									<input id="name" [(ngModel)]="passengerObj.name" name="name" type="text"
										class="form-control" #name="ngModel" required> </div>
								<span [ngStyle]="{ 'color': 'red' }" class="help-block"
									*ngIf="!name.valid && name.touched">Please Enter a Valid name !</span>
							</div>

							<div class="form-group">
								<label for="seatNumber">Seat Numer</label>
								<div class="com-sm-8">
									<input id="seatNumber" [(ngModel)]="passengerObj.seatNumber" name="seatNumber"
										type="text" class="form-control" readonly> </div>
							</div>
							<div class="form-group">
								<label for="address">Addrss</label>
								<div class="com-sm-8">
									<input id="address" [(ngModel)]="passengerObj.address" type="text" name="address"
										class="form-control" checked> </div>
							</div>
							<div class="form-group">
								<label for="passport">Passport</label>
								<div class="com-sm-8">
									<input id="passport" [(ngModel)]="passengerObj.passport" name="passport" type="text"
										class="form-control"> </div>
							</div>
							<div class="form-group">
								<label for="wheelchair">Wheel Chair</label>
								<div class="form-control">
									<label class="radio-inline">
										<input type="radio" [value]="true" name="wheelchair"
											[(ngModel)]="passengerObj.wheelchair"> Yes </label>
									<label class="radio-inline">
										<input type="radio" [value]="false" name="wheelchair"
											[(ngModel)]="passengerObj.wheelchair"> No </label>
								</div>
							</div>
							<div class="form-group">
								<label for="withInfants">With Infants</label>
								<div class="form-control">
									<label class="radio-inline">
										<input type="radio" [value]="true" name="withInfants"
											[(ngModel)]="passengerObj.withInfants"> Yes </label>
									<label class="radio-inline">
										<input type="radio" [value]="false" name="withInfants"
											[(ngModel)]="passengerObj.withInfants"> No </label>
								</div>
							</div>
							<div class="form-group">
								<label for="inFlightShop">Flight Shop</label>
								<div class="form-control">
									<label class="radio-inline">
										<input type="radio" [value]="true" name="inFlightShop"
											[(ngModel)]="passengerObj.inFlightShop"> Yes </label>
									<label class="radio-inline">
										<input type="radio" [value]="false" name="inFlightShop"
											[(ngModel)]="passengerObj.inFlightShop"> No </label>
								</div>
							</div>
						</div>
					</div>
					<div class="panel-footer"> <span style="display:inline" *ngIf="openEditPassenger"> <button
								class="btn btn-primary" type="submit" (click)="updatePassenger(passengerForm)"
								data-dismiss="modal">Save</button></span> <span style="display:inline"
							*ngIf="!openEditPassenger"> <button class="btn btn-primary" type="submit"
								[disabled]='!passengerForm.valid' (click)="updatePassenger(passengerForm)"
								data-dismiss="modal">Add</button></span> </div>
				</form>
			</div>
		</div>
	</div>
</div>